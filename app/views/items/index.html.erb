<section class="statistics">
  <h2>Statistics</h2>
  <div class="five_most">
    <h3>Most Popular Items</h3>
    <script type="text/javascript">
      var svg = d3.select('div.popular')
                  .append('svg')
                  .attr('width', '800px')
                  .attr('height', '400px')
      svg.selectAll('rect.bar')
        .data(<%= @items.popular_five %>)
        .enter()
        .append('rect')
        .attr('width',function(d,i){return d.width})
        .attr('height',function(d,i){return d.height})
        .attr('x',function(d,i){return i * d.width})
        .attr('y',function(d,i){return divHeight - d.height})
    </script>
    <div id="popular-graph">
      <svg id="popular">
      </svg>
    </div>
    <% @items.popular_five.each do |item| %>
    <div class="popular">
      <img src=<%= item.image_url %> class="tiny-image" alt="image of <%= item.item_name %>"></a>
      <%= link_to item.item_name, item_path(item) %> -
      <%= item.quantity_sold %> bought
    </div>
    <% end %>
  </div>

  <div class="five_least">
    <h3>Least Popular Items</h3>
    <% @items.unpopular_five.each do |item| %>
    <div class="unpopular">
      <img src=<%= item.image_url %> class="tiny-image" alt="image of <%= item.item_name %>"></a>
      <%= link_to item.item_name, item_path(item) %> -
      <%= item.quantity_sold %> bought
    </div>
    <% end %>
  </div>
</section>

<div class="items-container">
  <% @items.each do |item| %>
    <div class="item-card">
      <h2><%= link_to item.item_name, item_path(item) %></h2>
      <a href="<%=item_path(item)%>"><img src=<%= item.image_url %> class="medium-image" alt="image of <%= item.item_name %>"></a>
      <br>
      <p>Merchant: <%= item.merchant_name %></p>
      <p>In Inventory: <%= item.inventory %></p>
      <p>Price: <%= number_to_currency(item.current_price.round(2)) %></p>
    </div>
  <% end %>
</div>
